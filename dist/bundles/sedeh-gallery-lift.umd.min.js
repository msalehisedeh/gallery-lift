!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@sedeh/gallery-lift",["exports","@angular/core","@angular/common"],t):t((e.sedeh=e.sedeh||{},e.sedeh["gallery-lift"]={}),e.ng.core,e.ng.common)}(this,function(e,t,i){"use strict";var r=function(){function e(){var i=this;this.layList=[1],this.displayType="c1",this.selectedIndex=0,this.liftup=!1,this.focused=!1,this.expanded=!1,this.onselect=new t.EventEmitter,this.onaction=new t.EventEmitter,this.sideBySide=!0,this.liftOnZero=!1,this.showRemainingCount=!1,this.showTitleOnHover=!1,this.showMessageOnHover=!0,this.maxHeight=400,this.hoverMessage="See more...",this.layout="large-on-single",navigator.platform.toUpperCase().indexOf("MAC")<0&&(document.addEventListener("webkitfullscreenchange",function(e){window.screenTop||window.screenY||i.fullScreen()}),document.addEventListener("mozfullscreenchange",function(e){var t=window;t.fullScreen||t.innerWidth==screen.width&&t.innerHeight==screen.height||i.fullScreen()}),document.addEventListener("MSFullscreenChange",function(e){var t=window;t.fullScreen||t.innerWidth==screen.width&&t.innerHeight==screen.height||i.fullScreen()}))}return e.prototype.ngOnChanges=function(e){if(e.layout)switch(this.layout){case"large-on-single":this.displayType="c1",this.layList=[1];break;case"split-on-dual":this.displayType="c2",this.layList=[1,2];break;case"large-on-right":this.displayType="c3",this.layList=[1,2,3];break;case"split-on-quadruple":this.displayType="c4",this.layList=[1,2,3,4];break;case"large-on-middle":this.displayType="c5",this.layList=[1,2,3,4,5];break;case"large-on-left":this.displayType="rc3",this.layList=[1,2,3];break;case"large-on-sides":this.displayType="rc4",this.layList=[1,2,3,4]}},e.prototype.maxHeightOf=function(e){var t=this.maxHeight;switch(this.layout){case"large-on-single":case"split-on-dual":break;case"large-on-right":t=e<2?this.maxHeight/2:t;break;case"split-on-quadruple":t=this.maxHeight/2;break;case"large-on-middle":t=2===e?t:this.maxHeight/2;break;case"large-on-left":t=0===e?t:this.maxHeight/2;break;case"large-on-sides":t=0===e||3===e?t:this.maxHeight/2}return t+"px"},e.prototype.liftUpImagery=function(e){this.selectedIndex=this.liftOnZero?0:e,this.liftup=!0,this.onselect.emit({index:this.selectedIndex,action:"lift up"})},e.prototype.liftDownImagery=function(){this.expanded&&this.fullScreen(),this.liftup=!1,this.focused=!1,this.onselect.emit({index:this.selectedIndex,action:"lift down"})},e.prototype.fullScreen=function(){var e=document;if(this.expanded=!this.expanded,this.expanded){var t=e.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()},e.prototype.previous=function(){this.selectedIndex=this.selectedIndex-1,this.onaction.emit({action:"view previous",index:this.selectedIndex,time:new Date})},e.prototype.next=function(){this.selectedIndex=this.selectedIndex+1,this.onaction.emit({action:"view next",index:this.selectedIndex,time:new Date})},e.prototype.videoEvent=function(e){this.onaction.emit({action:e.type,index:this.selectedIndex,time:new Date,item:{autoplay:e.target.autoplay,controls:e.target.controls,duration:e.target.duration,ended:e.target.ended,error:e.target.error,paused:e.target.paused,muted:e.target.muted,currentTime:e.target.currentTime,volume:e.target.volume}})},e.prototype.hoverOver=function(e){this.onaction.emit({action:e.type,index:this.selectedIndex,time:new Date})},e.prototype.hoverOut=function(e){this.onaction.emit({action:e.type,index:this.selectedIndex,time:new Date})},e.prototype.showMore=function(e){return this.focused||(this.focused=!0,e.focus()),this.selectedIndex<this.gallery.length-1},e.prototype.keyup=function(e){13===e.which&&e.target.click()},e.decorators=[{type:t.Component,args:[{selector:"gallery-lift",template:'\r\n<div class="viewport {{displayType}}">\r\n    <div *ngFor="let row of layList; let i = index"\r\n        (keyup)="keyup($event)"\r\n        (click)="liftUpImagery(i)"\r\n        class="view"\r\n        [style.max-height]=\'maxHeightOf(i)\'\r\n        [attr.tabindex]="liftup ? -1: 0">\r\n        <span class="off-screen" *ngIf="template && gallery[i].data">\r\n            <ng-container \r\n                [ngTemplateOutlet]="template" \r\n                [ngTemplateOutletContext]="{data: gallery[i].data, selected: i+1, total: gallery.length}"></ng-container>\r\n        </span>\r\n        <div *ngIf="showTitleOnHover && gallery[i].data && gallery[i].data.title" class="title">{{gallery[i].data.title}}</div>\r\n        <img *ngIf="gallery[i].type === undefined || gallery[i].type === \'image\'" aria-hidden="true" width="100%" height="100%" [src]="gallery[i].src" />\r\n        <video *ngIf="gallery[i].type === \'video\'" width="100%" [attr.src]="gallery[i].src" disabled></video>\r\n        <div *ngIf="showRemainingCount && i === (layList.length - 1)" class="counter">\r\n            + {{gallery.length - i - 1}}\r\n            <span class="off-screen">more entries</span>\r\n        </div>\r\n        <div *ngIf="showMessageOnHover" class="more">\r\n            {{hoverMessage}}\r\n            <span aria-hidden="true" class="enlarge fa fa-clone" *ngIf="layout === \'large-on-single\'"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="lift" [class.piled]="!sideBySide" *ngIf="liftup">\r\n    <div class="left-controls">\r\n        <a *ngIf="selectedIndex>0" \r\n            title="View previous"\r\n            class="prev fa fa-chevron-left" tabindex="0"\r\n            (keyup)="keyup($event)"\r\n            (click)="previous()"></a>\r\n    </div>\r\n    <div class="lifter" \r\n        [class.vertical]="!sideBySide"\r\n        [class.fullscreen]="expanded">\r\n        <div class="lift-view"\r\n            (mouseover)="hoverOver($event)">\r\n            <img *ngIf="gallery[selectedIndex].type === undefined || gallery[selectedIndex].type === \'image\'"  aria-hidden="true" width="100%" height="100%" [src]="gallery[selectedIndex].src" />\r\n            <video *ngIf="gallery[selectedIndex].type === \'video\'" \r\n                width="100%" \r\n                [attr.src]="gallery[selectedIndex].src" \r\n                (play)="videoEvent($event)"\r\n                (pause)="videoEvent($event)"\r\n                (ended)="videoEvent($event)"\r\n                (seeked)="videoEvent($event)"\r\n                (error)="videoEvent($event)"\r\n                (fullscreenchange)="videoEvent($event)"\r\n                controls></video>\r\n        </div>\r\n        <div class="lift-info" *ngIf="template && gallery[selectedIndex].data">\r\n            <ng-container \r\n                [ngTemplateOutlet]="template" \r\n                [ngTemplateOutletContext]="{data: gallery[selectedIndex].data, selected: selectedIndex+1, total: gallery.length}"></ng-container>\r\n        </div>\r\n    </div>\r\n    <div class="right-controls">\r\n        <a tabindex="0"  #closeButton\r\n            class="close fa fa-close" \r\n            title="Close viewer"\r\n            (click)="liftDownImagery()" \r\n            (keyup)="keyup($event)"></a>\r\n        <a (click)="fullScreen()" \r\n            class="fa" \r\n            [attr.title]="expanded ? \'Normal screen view\' : \'Full screen view\'"\r\n            [class.fa-expand]="!expanded" \r\n            [class.fa-compress]="expanded"></a>\r\n        <a *ngIf="template && gallery[selectedIndex].data"\r\n            (click)="sideBySide = !sideBySide" \r\n            class="fa" \r\n            [attr.title]="sideBySide ? \'Align Vertical\' : \'Align Horizontal\'"\r\n            [class.fa-columns]="!sideBySide" \r\n            [class.fa-bars]="sideBySide"></a>\r\n        <a *ngIf="showMore(closeButton)" \r\n            title="View next"\r\n            class="next fa fa-chevron-right" tabindex="0" \r\n            (keyup)="keyup($event)"\r\n            (click)="next()"></a>\r\n        <a [href]="gallery[selectedIndex].src"  \r\n            title="download" \r\n            class="download fa fa-download" \r\n            download></a>\r\n    </div>\r\n</div>\r\n',styles:[":host{box-sizing:border-box;display:flex;padding:0;margin:5px}:host .off-screen{display:block;width:1px;height:1px;position:absolute;left:-99999px;top:-99999px}:host .lift{width:100%;height:100%;min-height:300px;position:fixed;top:0;left:0;display:flex;flex-direction:row;z-index:99;background-color:rgba(0,0,0,.95)}:host .lift .left-controls{width:30px;height:100vh;color:#fff;background-color:transparent;padding:20% 0;box-sizing:border-box}:host .lift .left-controls .prev{top:50%;width:22px}:host .lift .left-controls a{font-size:1.8rem;cursor:pointer;text-align:center;width:100%;position:absolute;display:flex}:host .lift .left-controls a:hover{color:#ccc}:host .lift .lifter{flex:1;display:flex;flex-direction:row}:host .lift .lifter .lift-view{flex:1;margin:20px}:host .lift .lifter .lift-view img{border:2px solid #d1e4be}:host .lift .lifter .lift-info{width:300px;background-color:#fff;margin:20px 15px 16px;padding:10px;border:2px solid #d1e4be}:host .lift .lifter.vertical{flex-direction:column;display:block}:host .lift .lifter.vertical .lift-info{width:auto;height:200px;margin:20px;overflow-y:auto}:host .lift .right-controls{width:30px;height:100vh;color:#fff;background-color:transparent;display:flex;flex-direction:column;padding:20% 0;box-sizing:border-box}:host .lift .right-controls .close{position:absolute;right:0;top:5px;width:33px}:host .lift .right-controls .next{top:50%;width:22px}:host .lift .right-controls .fa-compress,:host .lift .right-controls .fa-expand{position:absolute;right:0;top:44px;width:33px;font-size:1.5rem}:host .lift .right-controls .fa-bars,:host .lift .right-controls .fa-columns{position:absolute;right:0;top:111px;width:33px;font-size:1.5rem}:host .lift .right-controls a{font-size:1.8rem;cursor:pointer;text-align:center;width:100%;position:absolute}:host .lift .right-controls a:hover{color:#ccc}:host .lift .right-controls .download{position:absolute;right:0;top:77px;font-size:1.5rem;width:33px;color:#fff}:host .lift.piled{position:absolute;height:inherit}:host .lift.piled .lifter.vertical .lift-info{margin:20px}:host .lift.piled .lifter.fullscreen .lift-info,:host .lift.piled .lifter.fullscreen .lift-view{margin:20;height:auto}:host .viewport{display:-ms-inline-grid;display:inline-grid;grid-gap:0;background-color:#000;padding:0}:host .viewport .view{text-align:center;padding:0;position:relative;box-sizing:border-box;display:flex;overflow:hidden;cursor:pointer}:host .viewport .view img,:host .viewport .view video{-o-object-fit:cover;object-fit:cover}:host .viewport .view:focus,:host .viewport .view:hover{-webkit-filter:brightness(70%);-moz-filter:brightness(70%);-o-filter:brightness(70%);-ms-filter:brightness(70%);filter:brightness(70%)}:host .viewport .view:focus .more,:host .viewport .view:focus .title,:host .viewport .view:hover .more,:host .viewport .view:hover .title{display:inline}:host .viewport .view .counter{width:100%;height:100%;background-color:rgba(100,100,100,.5);color:#fff;position:absolute;top:0;overflow:hidden;box-sizing:border-box}:host .viewport .view .title{display:none;width:100%;background-color:#000;color:#fff;font-size:1rem;position:absolute;left:0;top:0;padding:5px;overflow:hidden}:host .viewport .view .more{display:none;width:100%;background-color:#000;color:#fff;font-size:1.2rem;position:absolute;left:0;bottom:0;padding:5px}:host .viewport .view .more .enlarge{position:absolute;right:20px}:host .viewport .view:nth-child(1){-ms-grid-row:1;-ms-grid-column:1;grid-area:tl}:host .viewport .view:nth-child(2){-ms-grid-row:1;-ms-grid-column:3;grid-area:bl}:host .viewport .view:nth-child(3){-ms-grid-row:1;-ms-grid-row-span:3;-ms-grid-column:3;-ms-grid-column-span:3;grid-area:center}:host .viewport .view:nth-child(4){-ms-grid-row:3;-ms-grid-column:3;grid-area:tr}:host .viewport .view:nth-child(5){-ms-grid-row:3;-ms-grid-column:7;grid-area:br}:host .viewport.c1{grid-template-areas:'tl'}:host .viewport.c1 .counter{font-size:4rem;padding:25% 0}:host .viewport.c2{-ms-grid-columns:50% 0 50%;grid-template-columns:50% 50%;grid-template-areas:'tl bl'}:host .viewport.c2 .counter{font-size:4rem;padding:25% 0}:host .viewport.c3{-ms-grid-columns:32% 0 auto;grid-template-columns:32% auto;-ms-grid-rows:auto 0 auto;grid-template-areas:'tl center center' 'bl center center'}:host .viewport.c3 .counter{font-size:4rem;padding:25% 0}:host .viewport.c4{-ms-grid-columns:50% 0 50%;grid-template-columns:50% 50%;-ms-grid-rows:auto 0 auto;grid-template-areas:'tl center' 'bl tr'}:host .viewport.c4 .counter{font-size:4rem;padding:25% 0}:host .viewport.c5{-ms-grid-columns:25% 0 auto 0 25%;grid-template-columns:25% auto 25%;-ms-grid-rows:auto 0 auto;grid-template-areas:'tl center center tr' 'bl center center br'}:host .viewport.c5 .counter{font-size:2.5rem;padding:25% 0}:host .viewport.rc3{-ms-grid-columns:auto 0 30%;grid-template-columns:auto 30%;-ms-grid-rows:auto 0 auto;grid-template-areas:'tl tl bl' 'tl tl center'}:host .viewport.rc3 .counter{font-size:2.5rem;padding:40% 0}:host .viewport.rc4{-ms-grid-columns:30% 0 auto 0 30%;grid-template-columns:30% auto 30%;-ms-grid-rows:auto 0 auto;grid-template-areas:'tl bl tr' 'tl center tr'}:host .viewport.rc4 .counter{font-size:2.5rem;padding:80% 0}@media only screen and (max-width:600px){:host .lift .lifter{flex-direction:column}:host .lift .lifter .lift-info{width:auto;margin:20px;overflow-y:auto}:host .lift .right-controls .fa-bars,:host .lift .right-controls .fa-columns{display:none}:host .lift.piled{position:fixed!important}}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={onselect:[{type:t.Output}],onaction:[{type:t.Output}],sideBySide:[{type:t.Input}],liftOnZero:[{type:t.Input}],showRemainingCount:[{type:t.Input}],showTitleOnHover:[{type:t.Input}],showMessageOnHover:[{type:t.Input}],gallery:[{type:t.Input}],template:[{type:t.Input}],maxHeight:[{type:t.Input}],hoverMessage:[{type:t.Input}],layout:[{type:t.Input}]},e}(),o=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],declarations:[r],exports:[r],entryComponents:[],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.GalleryLiftComponent=r,e.GalleryLiftModule=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sedeh-gallery-lift.umd.min.js.map